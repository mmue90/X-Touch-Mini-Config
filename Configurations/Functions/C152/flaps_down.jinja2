{% set encoder_index = data.get_global_variable('FLAPS_ENC') %}
{{ data.print(encoder_index) }}
{% if data.get_global_variable('FLAPS_SETTING') == 0 %}
    {{ data.trigger_event('FLAPS_1', 1) }}
    {{ data.set_global_variable('FLAPS_SETTING', 1) }}
	{% set knobpos = 9 %}
    {{ data.set_encoder_led_value(encoder_index, knobpos) }}
{% elif data.get_global_variable('FLAPS_SETTING') == 1 %}
    {{ data.trigger_event('FLAPS_2', 1) }}
    {{ data.set_global_variable('FLAPS_SETTING', 2) }}
	{% set knobpos = 11 %}
    {{ data.set_encoder_led_value(encoder_index, knobpos) }}
{% elif data.get_global_variable('FLAPS_SETTING') == 2 %}
    {{ data.trigger_event('FLAPS_3', 1) }}
    {{ data.set_global_variable('FLAPS_SETTING', 3) }}
	{% set knobpos = 13 %}
    {{ data.set_encoder_led_value(encoder_index, knobpos) }}
{% else %}
    {{ data.trigger_event('FLAPS_DOWN', 1) }}
    {{ data.set_global_variable('FLAPS_SETTING', 3) }}
	{% set knobpos = 13 %}
    {{ data.set_encoder_led_value(encoder_index, knobpos) }}
{% endif %}
