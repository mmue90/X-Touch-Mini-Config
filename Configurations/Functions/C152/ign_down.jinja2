{% set encoder_index = data.get_global_variable('IGN_ENC') %}
{{ data.print(encoder_index) }}
{% if data.get_global_variable('IGN_SETTING') == 4 %}
    {{ data.trigger_event('MAGNETO_BOTH', 1) }}
    {{ data.set_global_variable('IGN_SETTING', 3) }}
	{% set knobpos = 9 %}
    {{ data.set_encoder_led_value(encoder_index, knobpos) }}
{% elif data.get_global_variable('IGN_SETTING') == 3 %}
    {{ data.trigger_event('MAGNETO_LEFT', 1) }}
    {{ data.set_global_variable('IGN_SETTING', 2) }}
	{% set knobpos = 7 %}
    {{ data.set_encoder_led_value(encoder_index, knobpos) }}
{% elif data.get_global_variable('IGN_SETTING') == 2 %}
    {{ data.trigger_event('MAGNETO_RIGHT', 1) }}
    {{ data.set_global_variable('IGN_SETTING', 1) }}
	{% set knobpos = 7 %}
    {{ data.set_encoder_led_value(encoder_index, knobpos) }}
{% else %}
    {{ data.trigger_event('MAGNETO_OFF', 1) }}
    {{ data.set_global_variable('IGN_SETTING', 0) }}
	{% set knobpos = 5 %}
    {{ data.set_encoder_led_value(encoder_index, knobpos) }}
{% endif %}
